## 7.7.2. 该回调轮询运输
该回调轮询时与贝叶服务器的通信发生在不同的域传输使用时不支持跨域方式（参见横截面原点）。

中的JavaScript 的XMLHttpRequest对象用来有限制，当调用被定向到一个其中的脚本已经被下载不同的域。

现在最新的浏览器实现的一个版本的XMLHttpRequest对象，它支持跨域调用，但调用成功，服务器必须进行合作，通常由部署 跨起源Servlet过滤器。

如遇旧的浏览器或服务器没有部署一个跨出身的解决方案，回调轮询传输使用JSONP脚本注入，其中注入一个<SCRIPT>元素，它的src属性指向贝叶服务器。浏览器注意到脚本元素注入并执行一个GET请求发送到指定源URL。贝叶服务器是知道这是JSONP请求，并与一个JavaScript函数，浏览器，然后执行，（并调用回的JavaScript CometD实现）回复。

有三个主要缺点，使用这种交通工具：

运输是chattier。这是因为，在浏览器顺序地执行注入的脚本，并且直到一个脚本已经完全“下载”时，它不能被执行的事实。例如，想象一下，涉及到脚本注入的长轮询和脚本注入的消息发布通信。在浏览器中注入长轮询的脚本，一个请求到服务器贝叶，但贝叶服务器保存请求等待服务器端事件（因此脚本不会下载）。然后在浏览器中注入发布脚本，该请求是向贝叶服务器，该服务器应答（因此脚本下载）。然而，浏览器不会执行第二个脚本，因为它没有执行的第一个，但（因为它的下载还没有完成）。在这些条件下，发布仅长轮询返回后执行。为了避免这种情况，贝叶服务器，如遇回调轮询传输，恢复客户的长期调查，每一个到达的是客户端的消息，这就是为什么交通chattier：长轮询更多的时候返回。

邮件的大小是有限的。这是必要的，以支持IE7，其中有一个2083个字符的限制为GET请求。

该反应的失败是slower.This是由于这样的事实，如果脚本注入点到返回一个错误（例如，贝叶服务器已关闭）一个URL时，浏览器直接忽略这个错误。
